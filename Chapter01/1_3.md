# 1.3 우리가 구축해야할 것은 무엇인가?
담당자: 윤선경
</br>
</br>
</br>

## 앞으로 만들 마이크로서비스 아키텍처 서비스 과정
**책 p43 그림 1-4 참고!**
1. 클라이언트 요청을 시작하려면 액세스 토큰을 획득해야 한다. -> 키클록에 인증 요청
2. 토큰을 얻고 나면 클라이언트는 스프링 클라우드 API 게이트웨이에 요청을 보낸다.

:question: API 게이트웨이 서비스: 전체 아키텍처에 대한 진입점

3. API 게이트웨이 서비스는 유레카 서비스와 통신하여 조직 및 라이선스 서비스의 위치를 조회 -> 해당 마이크로서비스 호출
4. 조직 서비스가 요청을 받으면 키클록에 액세스 토큰의 유효성을 검증해서 요청 처리 권한 여부 확인
5.
* 유효성이 확인되면 조직 서비스는 조직 데이터베이스에 정보 갱신 후 조회 -> 클라이언트에 HTTP 응답 보냄
* 다른 경로로 조직 정보가 갱신되면 조직 서비스는 카프카, 토픽을 추가로 전송 -> 이를 통해 라이선싱 서비스가 변경 사항 인식
  * 위 메세지가 라이선싱 서비스에 도착되면 레디스는 특정 정보를 레디스의 인메모리 데이터베이스에 저장

6. 이 과정 동안 집킨(Zipkin), 일레스틱 서치(Elasticsearch), 로그스태시(Logstash)를 사용하여 로그를 관리 및 표시,
스프링 부트 액추에이터(Actuator), 프로메테우스(Prometheus), 그라파나(Grafana)를 사용해서 애플리케이션 지표를 노출 및 표시한다.

