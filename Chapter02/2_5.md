# 2.5 스프링 부트와 자바로 마이크로서비스 만들기
작성자: 윤선경

2.4에서 언급한 가상 회사인 Optima Growth사를 위한 라이선싱 서비스인 마이크로서비스의 뼈대를 만드는 과정
라이선싱 서비스는 자바를 주 언어로, 아파치 메이븐을 빌드 도구로 사용
</br>
</br>

## 2.5.1 환경 설정

마이크로서비스 시작을 위한 기본 설정
* 자바 11
* 메이븐 3.5.4이상
* Spring Tools 4 (통합 개발 환경용으로 내려 받기 가능)
* 통합 개발 환경
  * 이클립스
  * 인텔리제이
  * 넷빈즈
앞으로 책의 예제 - 스프링 프레임워크 5와 스프링 부트 2 버전 사용
</br>
</br>

## 2.5.2 뼈대 프로젝트 시작하기
마이크로서비스의 뼈대와 애플리케이션을 빌드하는 메이븐 스크립트 생성
</br>

1. Spring Initializr (https://start.spring.io/) 를 사용해서 O-stock 라이선싱 서비스의 뼈대 프로젝트 생성
</br>

* 책 참고해서 스프링 이니셜라이저를 생성(의존성 p91 pom.xml 참고해서 추가)
  * 스프링 이니셜라이저로 생성할 수 있는 가장 낮은 버전은 책과 달리 2.7.11로 바뀜
<img src="https://user-images.githubusercontent.com/97610532/235504645-39f8ce13-9008-4fa0-b9a4-0771e8b9aef1.png" width="800px" height="400px" />

* Generate: 생성한 압축 파일 다운로드, EXPLORE: 생성될 파일 미리 보기
</br>

2. 다운로드 받은 압축파일을 원하는 위치에 풀고 인텔리제이로 열어서 책에 나온대로 하위 패키지 생성 및 pom.xml 파일 내용 확인 </br>

:bulb: 스프링 부트 프로젝트는 의존성을 별도로 설정할 필요 X (pom 파일에 정의된 스프링 부트 핵심 산출물에서 자동으로 가져옴)

</br>

|의존성|역할|
|:--:|:--|
|spring-boot-starter-parent|메이븐에 특정 버전의 스프링 프레임 워크를 내려받도록 지정|
|spring-boot-starter-actuator|* 실행 중인 스프링 부트 애플리케이션의 정보를 API 형식으로 확인할 수 있게 해 </br> * 스프링 부트 애플리케이션에서 제공하는 여러 정보(웹 및 database 상태, Bean 목록 등)를 </br> 모니터링할 수 있는 기능을 제공|
|spring-boot-starter-web|Spring MVC 사용하여 RESTful이 포함된 웹 애플리케이션을 구축하기 위한 스타터로 </br> Tomcat을 기본 내장 컨테이너로 사용할 수 있게 해준다|
|lombok|* Java의 라이브러리로 반복되는 메소드를 Annotation을 사용해서 자동으로 작성해준다. </br> 기계적으로 작성하는 VO, DTO, Entity 관련 작업을 쉽게 할 수 있게 해주는 라이브러리|
</br>

|플러그인|역할|
|:--:|:--|
|spring-boot-maven-plugin|메이븐에 스프링 부트 애플리케이션의 빌드와 배포를 단순화하는 </br> 최신 버전의 메이븐 플러그인을 설치하도록정지정|

</br>
</br>

## **2.5.3 스프링 부트 애플리케이션 부팅하기: 부트스트랩 클래스 작성**
마이크로서비스를 위한 스프링 컨테이너를 시작 및 초기화 작업을 스프링 부트스트랩 클래스에 구현

* 스프링 부트스트랩 클래스: 스프링부트가 애플리케이션을 시작하고 초기화한다.
* 스프링 컨트롤러 클래스: 마이크로서비스로 호출될 수 있는 HTTP 엔트포인트 노출한다.
</br>

스프링 부트는 서비스 설정 및 구성을 위해 애너테이션을 사용
* @SpringBootApplication: 이 클래스가 Bean을 정의하는 곳이라고 스프링 컨테이너에 알림

</br>

:star: **스프링 빈을 등록하는 방법**
1. 자바클래스에 @Component, @Service, @Repository 애너테이션을 추가 
    * @Controller, @Service, @Repository등의 어노테이션은 모두 @Component를 포함하고 있음
2. 클래스에 @Configuration 애너테이션을 추가한 후 @Bean 태그가 있는 스프링 빈을 생성할 메서드 추가(= 메소드에 @Bean 어노테이션을 붙여줌) </br>
  -> 자동으로 해당 타입의 빈 객체 생성
</br>
:question: 스프링 빈: 스프링 프레임 워크가 런타임 동안 IoC(Inversion of Control) 컨테이너를 사용해서 관리하는 객체로 '객체 저장소'에 생성 및 저장되어 재사용 가능

</br>


----------------------------------------------------------------------------------------------------------------------------------------------------------


